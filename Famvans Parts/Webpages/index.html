<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fam vans - The Parts Store</title>
     <link rel="icon" type="image/x-icon" href="fvlogo.png">

    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Roboto:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZmCULaMxtX6wY5gUIU3jv6C5i0jeKla4NKXo8kz3AhiU5T5r+E6ztJQ9f6pG9nK5eQ==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <script src="https://kit.fontawesome.com/037d909396.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="header.css">
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <header>
        <nav>
            <ul>
                
                <li><a href="index.html">Home</a></li>
                <li><a href="productss.html">Products</a></li>
                <li><a href="services.html">Services</a></li>
                <li><a href="index.html" class="logo-link"><img class="logo" src="FAMparts.png" alt="Fam Vans Parts Logo"></a></li>
                <li><a href="contact.html">Contact Us</a></li>
                <li>
                    <div class="cart">
                        <a href="search.html" aria-label="Search"><i class="fa-solid fa-magnifying-glass"></i></a>
                        <a href="cart.html" aria-label="Shopping Cart"><i class="fa-solid fa-truck"></i></a>
                    </div>
                </li>
            </ul>
        </nav>
    </header>

    <main>
        <div class="hero-container">
            <section class="hero">
                <div class="hero-content">
                    <h1>Welcome to Fam Vans, Commercial Parts & Accessories Store</h1>
                    <p>Your trusted source for high-quality parts and accessories for commercial cargo vans and work vehicles.
                    We serve the Los Angeles and Orange County areas with professional-grade components.
                    </p>

                    <p style="margin: 15px 0; font-size: 14px; color: #666;">Find parts for your cargo van, box truck, or commercial vehicle:</p>

                    <div class="hero-buttons">
                    <div class="selector-group">
                        <label for="year-select">Year</label>
                        <select id="year-select" class="van-selector">
                            <option class="options" value="">Select Year</option>
                        </select>
                    </div>
                    <div class="selector-group">
                        <label for="make-select">Make</label>
                        <select id="make-select" class="van-selector">
                            <option class="options" value="">Select Make</option>
                        </select>
                    </div>
                    <div class="selector-group">
                        <label for="model-select">Model</label>
                        <select id="model-select" class="van-selector">
                            <option class="options" value="">Select Model</option>
                        </select>
                    </div>
                    <button id="search-btn" class="go-btn">GO<i class="fa-solid fa-arrow-right"></i></button>
                </div>
                </div>
        </div>
    </section>    


    </main>

    

    <!-- <footer>
        <p>&copy; 2026 Fam Vans - The Parts Store. All rights reserved.</p>
    </footer> -->

    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-analytics.js";

      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyDLZ3XzE8JPX9cSTZuqUuGSX1C7hEB-D9s",
        authDomain: "fam-vans-parts.firebaseapp.com",
        databaseURL: "https://fam-vans-parts-default-rtdb.firebaseio.com",
        projectId: "fam-vans-parts",
        storageBucket: "fam-vans-parts.firebasestorage.app",
        messagingSenderId: "476576617089",
        appId: "1:476576617089:web:1d0f09f7e70440c8ed7380",
        measurementId: "G-LY52930H15"
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);

      // Van Selector Logic with Dynamic Filtering
      let vansDatabase = [];

      const yearSelect = document.getElementById('year-select');
      const makeSelect = document.getElementById('make-select');
      const modelSelect = document.getElementById('model-select');
      const searchBtn = document.getElementById('search-btn');

      // Load vans database from JSON
      async function loadVansDatabase() {
        try {
          const response = await fetch('../Models/vans.json');
          const data = await response.json();
          // Filter out passenger minivans - keep only cargo/commercial vans
          const passengerMinivans = ['Odyssey', 'Sienna', 'Voyager'];
          vansDatabase = data.vans.filter(van => !passengerMinivans.includes(van.model));
          populateYears();
        } catch (error) {
          console.error('Error loading vans database:', error);
          alert('Error loading van data. Please refresh the page.');
        }
      }

      // Populate years from database
      function populateYears() {
        const years = [...new Set(vansDatabase.map(van => van.year))].sort((a, b) => b - a);
        years.forEach(year => {
          const option = document.createElement('option');
          option.value = year;
          option.textContent = year;
          yearSelect.appendChild(option);
        });
      }

      // Populate makes based on selected year
      function populateMakes() {
        makeSelect.innerHTML = '<option value="">Select Make</option>';
        modelSelect.innerHTML = '<option value="">Select Model</option>';

        const selectedYear = yearSelect.value;
        let filteredVans = vansDatabase;

        if (selectedYear) {
          filteredVans = vansDatabase.filter(van => van.year == selectedYear);
        }

        const makes = [...new Set(filteredVans.map(van => van.make))].sort();
        makes.forEach(make => {
          const option = document.createElement('option');
          option.value = make;
          option.textContent = make;
          makeSelect.appendChild(option);
        });
      }

      // Populate models based on selected year and make
      function populateModels() {
        modelSelect.innerHTML = '<option value="">Select Model</option>';

        const selectedYear = yearSelect.value;
        const selectedMake = makeSelect.value;
        let filteredVans = vansDatabase;

        if (selectedYear) {
          filteredVans = filteredVans.filter(van => van.year == selectedYear);
        }

        if (selectedMake) {
          filteredVans = filteredVans.filter(van => van.make === selectedMake);
        }

        // Get unique combinations of model and model_number
        const modelMap = new Map();
        filteredVans.forEach(van => {
          const key = van.model;
          if (!modelMap.has(key)) {
            modelMap.set(key, van.model_number);
          }
        });

        // Sort and create options with model numbers
        const models = Array.from(modelMap.entries()).sort((a, b) => a[0].localeCompare(b[0]));
        models.forEach(([model, modelNumber]) => {
          const option = document.createElement('option');
          option.value = model;
          option.textContent = `${model} ${modelNumber}`;
          modelSelect.appendChild(option);
        });
      }

      // Event listeners for dynamic filtering
      yearSelect.addEventListener('change', populateMakes);
      makeSelect.addEventListener('change', populateModels);

      // Search functionality
      searchBtn.addEventListener('click', function() {
        const year = yearSelect.value;
        const make = makeSelect.value;
        const model = modelSelect.value;

        // Validate that at least one option is selected
        if (!year && !make && !model) {
          alert('Please select at least one option (Year, Make, or Model)');
          return;
        }

        // Create query string
        const queryParams = new URLSearchParams();
        if (year) queryParams.append('year', year);
        if (make) queryParams.append('make', make);
        if (model) queryParams.append('model', model);

        // Navigate to products page with query parameters
        window.location.href = `productss.html?${queryParams.toString()}`;
      });

      // Allow Enter key to trigger search
      [yearSelect, makeSelect, modelSelect].forEach(select => {
        select.addEventListener('keypress', function(e) {
          if (e.key === 'Enter') {
            searchBtn.click();
          }
        });
      });

      // Initialize on page load
      loadVansDatabase();
    </script>
</body>
</html>